angular.module("ipv4-input-directive",[]).directive("gkIpv4Input",function(){function o(e,o,u){var a=angular.element(o.find("div")),f=o.find("input"),l="";u.rwd!==undefined&&a.toggleClass("rwd",!0),e.$watch(u.value,function(t){e[u.valid]=r(t);if(!r(t))return;t.split(".").forEach(function(e,t){angular.element(f[t]).val(e)})}),f.on("focus",function(e){e.target.select(),o.find("div").toggleClass("selected",!0)}),f.on("focusout",function(e){o.find("div").toggleClass("selected",!1)}),Array.prototype.forEach.call(f,function(r,o){angular.element(r).on("keydown",function(t){t.keyCode>=48&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=105?l=e[u.value]:t.keyCode==37||t.keyCode==39?t.keyCode==37&&s.call(r)===0?(n.call(a,o-1),t.preventDefault()):t.keyCode==39&&s.call(r)===angular.element(r).val().length&&(n.call(a,o+1),t.preventDefault()):t.keyCode!=9&&t.keyCode!=8&&t.keyCode!=46&&t.preventDefault()}),angular.element(r).on("keyup",function(r){if(r.keyCode>=48&&r.keyCode<=57||r.keyCode>=96&&r.keyCode<=105){var s=angular.element(this).val(),c=Number(s);c>255?t(f,l):s.length>1&&s[0]==="0"?t(f,l):s.length===3?(e[u.value]=i(f),e.$apply(),n.call(a,o+1)):(e[u.value]=i(f),e.$apply())}else if(r.keyCode==8||r.keyCode==46)e[u.value]=i(f),e.$apply()})})}var e=function(e){var t=this;if(index===undefined)throw new Error("backup error");t.prevValues=e},t=function(e,t){t.split(".").forEach(function(t,n){if(n>4)throw new Error("index more than 4");angular.element(e[n]).val(t)})},n=function(e){var t=this;if(e===undefined||e<0||e>3)return;t.find("input")[e].select()},r=function(e){if(typeof e!="string")return!1;var t=e.split(".");return t.length!==4?!1:t.reduce(function(e,t){return e===!1||t.length===0?!1:Number(t)>=0&&Number(t)<=255?!0:!1},!0)},i=function(e){var t="";for(var n=0;n<4;++n)value=angular.element(e[n]).val(),t+=n===0?value:"."+value;return t},s=function(){var e=this;if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}throw new Error("cell is not an input")};return{restrict:"E",template:'<div class="ipv4-input"><input type="text" class="ipv4-cell" /><label class="ipv4-dot">.</label><input type="text" class="ipv4-cell" /><label class="ipv4-dot">.</label><input type="text" class="ipv4-cell" /><label class="ipv4-dot">.</label><input type="text" class="ipv4-cell" /></div>',link:o}});